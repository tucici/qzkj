> # DSP系列产品蓝牙协议
## 说明：
 * 适用于秦智DSP系列产品
## 蓝牙广播名称：
 * 名字包含`DSP`，不同产品不同名字 
## 写: 16位
 * 服务：FAA0
 * 特征：FAA1
## 读：16位 
 * 服务：FAA0
 * 特征：FAA1
## 数据格式：
`🔥🔥🔥有的固件版本不带帧头，不带帧头的直接拼接指令`
 * 固定长度: 14 byte，不足后面补0
 * 帧头: AA55 (2 bytes)
 * 指令：?? (1bytes)
 * 数据：?? (n bytes)
## 校验方式：
 * 无
--- 
--- 
>>## 功能 
### 通道频率,Q值,增益
 * 指令：
  * 单通道：0xAA
  * 联调：0xAB
 * 通道：0xC1~0xC8 
 * 频点下标：0x00~0x0E
 * 频率：0x0014~0x4E20
 * Q值：0x0005~0x07D0  (无负数，Q值*100，取整)
 * 增益：0x0000~0x0190 （有负数，增益+最大负增益，使之变成正数后，乘10，取整）
 * 例子：`(C1,C2联调，第1个频点，频率设100，Q值设0.5，增益设0)`
   ```javascript
   AA55+AB+C1+01+0064+0032+00,00,00,00,00
   ```
### 通道正反相
 * 指令：0xBB
 * 通道：0xC1~0xC8 
 * 正反相：0x00 = 正，0x01 = 反
 * 例子：`(C1，反相)`
   ```javascript
   AA55+BB+C1+01+00,00,00,00,00,00,00,00,00
   ```
### 通道延时
 * 指令：0xCC
 * 通道：0xC1~0xC8 
 * 延时：0x0000~0x03E8 (无负数，延时 * 100)
 * 例子：`(C1，延迟8ms)`
   ```javascript
   AA55+CC+C1+01+0320+00,00,00,00,00,00,00
   ``` 
### REM OUT DELAY
 * 有的有，有的没有 
 * 指令：0x52,0x45,0x4D,0x53,0x45,0x54(最后一个0x54，如果有多个RE rem这个数累加，比如0x55,0x56)
 * 时间：2byte
 * 状态：1byte
 * 例子：`rem 延迟100ms，打开`      
   ```javascript
   AA55+5245+4D53+4554+0064+01,00,00,00
   ``` 
### 通道静音，db音量
 * 指令：0xDB
 * 通道：0xC1~0xC8 
 * 是否静音：0x00 = 否，0x01 = 是
 * db音量：0x0000~0x03B6 (无正数，音量绝对值 * 10)
 * 例子：`(C1，没有静音，db=-50)`
   ```javascript
   AA55+DB+C1+00+01F4+00,00,00,00,00,00,00
   ```   
### 通道分频器
 * 指令：0xDD高通，0xDE低通
 * 通道：0xC1~0xC8 
 * 滤波类型：0x00 = bessel，0x01 = btr-w，0x02 = link-r
 * slope斜率：0x00 = 6, 0x01 = 12, 0x02 = 24, 0x03 = 48
 * 频率：0x0014~0x4E20
 * 例子：`(C1，高通，滤波类型： bessel，slope斜率：6，频率：20)`
        `(C1，低通，滤波类型： btr-w，slope斜率：12，频率：20000)`
   ```javascript
   AA55+DD+C1+00+00+0014+00,00,00,00,00,00
   AA55+DE+C1+01+01+4E20+00,00,00,00,00,00
   ``` 
 * 表格说明：
    |   滤波类   |         |  bessel | butter-w| link-r  |
    |:---------:|:-------:|:-------:|:-------:|:-------:|
    |           |    值→  |  0x00   |   0x01  |  0x02   |
    |  slope斜率 |   值↓   |---------|---------|---------|
    |      6    |   0x00  |0x00,0x00|0x00,0x00|0x00,0x00|
    |      12   |   0x01  |0x00,0x00|0x00,0x00|0x00,0x00|
    |      24   |   0x02  |0x00,0x00|0x00,0x00|0x00,0x00|
    |      36   |   0x03  |0x00,0x00|0x00,0x00|0x00,0x00|
    |      48   |   0x04  |0x00,0x00|0x00,0x00|0x00,0x00|

### 总音量
 * 指令：0xEE
 * 是否静音：0x00 = 否，0x01 = 是
 * db音量：0x0000~0x03B6 (无正数，音量绝对值 * 10)
 * 例子：`(总音量，静音，音量： -50)`
   ```javascript
   AA55+EE+01+01F4+00,00,00,00,00,00,00,00
   ```    
### 通道直通/恢复均衡（eq bypass / eq restore）
* `🔥🔥🔥注，当前选中那个通道就发哪个通道的直通，不是直通全部通道。`
* `🔥🔥🔥注，当前选中那个通道就发哪个通道的恢复，不是恢复全部通道。`
 * 指令：0xFF
 * 通道：0xC1~0xC8 
 * 直通/恢复：0x00 = 直通均衡，0x01 = 恢复均衡
 * 例子：`(C1，直通均衡)`
        `(C1，恢复均衡)`
   ```javascript
   AA55+FF+C1+00+00,00,00,00,00,00,00,00,00
   AA55+FF+C1+01+00,00,00,00,00,00,00,00,00
   ```   
### 重置均衡（reset）
* `🔥🔥🔥注，全部通道EQ重置发通道指令为C0，其他C1-C8为单个通道重置EQ。`
 * 指令：0xFF
 * 重置：0x02
 * 通道：0xC1~0xC8(0xC0 = 全部) 
 * 例子：`(全部通道，重置均衡)`
   ```javascript
   AA55+FF+02+C0+00,00,00,00,00,00,00,00,00
   ```
### 重置DSP
 * 指令：0xAA,0xFF,0xFF
   ```javascript
   AA55+AA+FF+FF+00,00,00,00,00,00,00,00,00
   ```             
### 合频
* `🔥🔥🔥前面接帧头AA55`
* `🔥🔥🔥类似 0xFF,0x0D,0x7C,0x55后面 这段 可要可不要，例如如果单次数据长度最高14字节，如果超出长度，则把后面这4字节的尾，去掉试试`
* `🔥🔥🔥格式：帧头AA55(2byte)+指令(3byte)+通道(1byte)+所有输入通道(8byte，如果多于8个输入通道，需要和硬件讨论这里有多少byte)+尾(4byte)`
 * 2CH:
   * 指令：0xAA,0x83,0xF2
   * 通道：0x00，固定模式通道 = 0x00
   * 例子： 
     ```javascript
     AA55+AA83F2+00+00,00,00,00,00,00,00,00+FF0D7C55(后面4byte可不要)
     ```   
 * 4CH: 
   * 指令：0xAA,0x83,0xF4
   * 通道：0x00，固定模式通道 = 0x00
   * 例子： 
     ```javascript
     AA55+AA83F4+00+00,00,00,00,00,00,00,00+FF0B7C55(后面4byte可不要)
     ```  
 * 6CH: 
   * 指令：0xAA,0x83,0xF6
   * 通道：0x00，固定模式通道 = 0x00
   * 例子：
     ```javascript
     AA55+AA83F6+00+00,00,00,00,00,00,00,00+FF0B7C55(后面4byte可不要)
     ```     
 * SUM: 
   * 指令：0xAA,0x83,0xFA
   * 通道：0x00，固定模式通道 = 0x00
   * 例子：
     ```javascript
     AA55+AA83FA+00+00,00,00,00,00,00,00,00+FF097C55
     ```     
 * COMSUMER: 
   * 指令：0xAA,0x83,0xF0
   * 通道：0xC1~0xC8 
   * 对应输入位置有输入0x01，没有输入0x00
   * 例子：`C1，有8个输入通道啊`
   ```javascript
   AA55+AA83F0+C1+01,01,01,01,01,01,01,01+FF0F7C55
   ``` 
### 噪门控制
 * `🔥🔥🔥APP UI无此选项可以不加`
 * 指令：0xCC,0xCC
 * 噪门等级：0x00 = 关闭，0x01 = 1级，0x08 = 8级
   * 例子：`level 8 噪门控制`
   ```javascript
   AA55+CCCC+08+00,00,00,00,00,00,00,00,00
   ```      
### 限幅器
* `🔥🔥🔥APP UI无此选项可以不加`
 * 指令：0xFA
 * 通道：0xC1~0xC8 
 * 电平：0x00~0x30
 * 响应速度：0x05~0x17
 * 释放时间：(2,4,6,8,16,32)
### 连接验证
* `🔥🔥🔥APP先不加`
   ```javascript
   0x47,0x45,0x54,0x44,0x53,0x50,0x54,0x59,0x50,0x45
   ```   
### 获取设备数据
   ```javascript
   0x47,0x45,0x54,0x44,0x53,0x50,0x54,0x59,0x55,0x55
   ```     
### 发送获取设备数据包后 的确认指令
   ```javascript
   0x47,0x45,0x54,0x44,0x53,0x50,0x54,0x59,0x55,0x55,0x00~0x01(分段),0x1~0xff(次数)
   ``` 
### 保存到设备
* `🔥🔥🔥APP发指令时加AA,55即可，保存参数到设备指令，APP上调好的参数，可以通过次指令保存到MCU的相应位置` 
   ```javascript
   0xFF 0xCC 0x00-(D1~D5)
   ```    
### 选择RCA(analog) | Toslink | DB(digital bluetooth) 
* 指令：0xAA，0x82
* 选择RAC：0xC1
* 选择Toslink: 0xC2
* 选择DB：0xC3
* 例子：切换到蓝牙模式
   ```javascript
   0xAA,0x82,0xC3(如果某个版本有固定长度，后面补0)
   ```
### 修改DB模式设置数据
* 指令：0xAA,0x83,0xFB
* 通道：0xC1~0xC8
* L未选中/选中：0x00/0x01
* R未选中/选中：0x00/0x01
* 一个未选中/选中1个/选中2个：0x00/0x01/0x02
* L在界面显示的位置：0x01/0x02
* R在界面显示的位置：0x01/0x02
* `蓝牙通道下，输入选择指令，类似模拟通道的输入选择，只是只有两个通道，故在UI上显示L或者R。`
### 修改Toslink模式设置数据
* 指令：0xAA,0x83,0xFC
* 通道：0xC1~0xC8
* L未选中/选中：0x00/0x01
* R未选中/选中：0x00/0x01
* 一个未选中/选中1个/选中2个：0x00/0x01/0x02
* L在界面显示的位置：0x01/0x02
* R在界面显示的位置：0x01/0x02
* `Toslink通道下，输入选择指令，类似模拟通道的输入选择，只是只有两个通道，故在UI上显示L或者R。`